<script>
function del_thing(which, index, ...moreargs) {
    const who = document.getElementById("who").value.replace(' ','~');
    const eventname = document.getElementById("eventname").value;
    const data = {'who': who,
                  'eventname': eventname,
                  'del': which,
                  'index': index };
    if (which !== 'event') {
      data['delevent'] = moreargs[0];
      if (which === 'time') {
        data['delname'] = moreargs[1];
      }
    }
    fetch('availability.php', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: new URLSearchParams(data),
    })
    .then(response => response.text())
    .then(responseText => {
      const parser = new DOMParser();
      const doc = parser.parseFromString(responseText, 'text/html');
      const newcontent = doc.getElementById('pagecontents');
      if (newcontent) {
        document.getElementById('pagecontents').innerHTML
          = newcontent.innerHTML;
      }
      else {
        console.log("Updated contents not found in response");
      }
    })
    .catch(error => console.error('Error:', error));
}
</script>
<!-- CSS -->
<link rel="stylesheet" href="/res/date-picker.css" />
ERRORMSG
<div id="pagecontents">EVENTLIST</div>
<input id="who" type="hidden" value="WHO"/>
<input id="eventname" type="hidden" value="EVENTNAME"/>
<h4>Create new event</h4>
<form action="availability.php" method="post">
  <input name="who" type="hidden" value="WHO"/>
  <input name="eventname" type="hidden" value="EVENTNAME"/>
  <input name="newevent" type="text" placeholder="Event Name"/>
  <input type="submit" name="neweventbutton" value="Create"/>
</form>
<hr width="50%" color="#008A00" align="left" />
