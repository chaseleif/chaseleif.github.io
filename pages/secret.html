<script>
function del_thing(which, index, ...moreargs) {
    const who = document.getElementById("who").value.replace(' ','~');
    const eventname = document.getElementById("eventname").value;
    const data = {"who": who,
                  "eventname": eventname,
                  "del": which,
                  "index": index };
    if (which !== "event") {
      data["delevent"] = moreargs[0];
      if (which === "time") {
        data["delname"] = moreargs[1];
      }
    }
    fetch('availability.php', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: new URLSearchParams(data),
    })
    .then(response => response.text())
    .then(responseText => {
      const parser = new DOMParser();
      const doc = parser.parseFromString(responseText, 'text/html');
      const newcontent = doc.getElementById('pagecontents');
      if (newcontent) {
        document.getElementById('pagecontents').innerHTML
          = newcontent.innerHTML;
      }
      else {
        console.log("Updated contents not found in response");
      }
    })
    .catch(error => console.error('Error:', error));
}
</script>
<!-- CSS -->
<link rel="stylesheet" href="/res/date-picker.css" />
<input type="hidden" id="who" value="WHO">
<input type="hidden" id="eventname" value="EVENTNAME">
ERRORMSG
<h4>Enter your first and last name and the event name</h4>
<form action="availability.php" method="post">
  <input name="firstname" type="text" placeholder="First Name"/>
  <input name="lastname" type="texte" placeholder="Last Name"/>
  <input name="eventname" type="text" placeholder="Event Name"/>
  <input type="submit" name="namebutton" value="Confirm"/>
</form>
<div id="pagecontents">EVENTLIST</div>
<form action="availability.php" method="post">
  <input name="who" type="hidden" value="WHO"/>
  <input name="eventname" type="hidden" value="EVENTNAME"/>
  <input name="newevent" type="text" placeholder="Event Name"/>
  <input type="submit" name="neweventbutton" value="Create"/>
</form>
<hr width="50%" color="#008A00" align="left" />
